(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{449:function(e,t,n){},451:function(e,t,n){},642:function(e,t,n){},644:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(20),s=n.n(c),o=(n(449),n(18)),a=n(431),l=n(19),u=n(67),j=n(13),d=n(57),b=n.n(d),h=n(88),O=function(){var e=function(){try{return JSON.parse(localStorage.getItem("REACT_TOKEN_AUTH")||"null")}catch(e){return null}}(),t=function(){if(null===e)return null;var t=e.accessToken.split(".");if(t.length<2)return null;try{return JSON.parse(atob(t[1])).sub}catch(n){return null}},n=(t(),function(){return!!e}),r=function(e){if("string"!==typeof e)return null;var t=e.split(".");if(t.length<2)return null;try{var n=JSON.parse(atob(t[1]));return n&&n.exp&&Number.isFinite(n.exp)?1e3*n.exp:null}catch(r){return null}},i=[],c=function(r){r?(localStorage.setItem("REACT_TOKEN_AUTH",JSON.stringify(r)),t()):(localStorage.removeItem("REACT_TOKEN_AUTH"),null),e=r,function(){var e=n();i.forEach((function(t){return t(e)}))}()};return{getToken:function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","");case 2:if(!((i=r(e.accessToken))&&Date.now()>i)){t.next=8;break}return t.next=5,fetch("/update-token",{method:"POST",body:e.refreshToken}).then((function(e){return e.json()})).catch((function(){return null}));case 5:typeof(n=t.sent)!==typeof e&&c(null),c(n);case 8:return t.abrupt("return",e.accessToken);case 9:case"end":return t.stop()}var i}),t)})));return function(){return t.apply(this,arguments)}}(),isLoggedIn:n,setToken:c,subscribe:function(e){i.push(e)},unsubscribe:function(e){i=i.filter((function(t){return t!==e}))},getUserId:function(){return t()}}},f=function(){var e=O();return{useAuth:function(){var t=Object(r.useState)(e.isLoggedIn()),n=Object(o.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var t=function(e){c(e)};return e.subscribe(t),function(){e.unsubscribe(t)}}),[]),[i]},authFetch:function(){var t=Object(h.a)(b.a.mark((function t(n,r){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:if(i=t.sent,r=r||{},""!==i){t.next=6;break}return t.abrupt("return",fetch(n,r));case 6:return r.headers=Object(j.a)(Object(j.a)({},r.headers),{},{Authorization:"".concat(i)}),t.abrupt("return",fetch(n,r));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),login:function(t){e.setToken(t)},logout:function(){e.setToken(null)},getUserId:function(){return e.getUserId()}}}(),p=f.useAuth,x=f.authFetch,m=f.login,g=f.logout,v=f.getUserId,y=(n(450),n(211)),w=(n(451),n(680)),C=n(411),S=n.n(C),k=n.p+"static/media/cat.9f5abe59.svg",T=n(3);var E=function(){var e,t=Object(r.useContext)(lt),n=Object(l.g)(),i=p(),c=Object(o.a)(i,1)[0],s=Object(r.useState)(!1),a=Object(o.a)(s,2),j=a[0],d=a[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),O=h[0],f=h[1];return t.avatar.trigger=j,t.avatar.fetch=d,Object(r.useEffect)((function(){c&&x("".concat(window.location.origin,"/users/avatar/").concat(v())).then((function(e){if(e.ok)return e.json();if(403===e.status)return g(),t.showAuth(!0),n.push("/"),{body:{url:""}};throw new Error("Error code: "+e.status)})).then((function(e){f(e.url)})).catch((function(e){console.log(e),n.push("/error")}))}),[j]),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexGrow:0,flexShrink:1,flexBasis:"auto"},children:[Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(T.jsx)("div",{children:Object(T.jsx)("button",{className:"btn",style:{width:60,marginRight:"3rem"},onClick:function(){return n.push("/")},children:Object(T.jsx)("img",{src:k})})}),Object(T.jsx)("h1",{children:"Simple blog"})]}),Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",marginRight:"3rem"},children:[Object(T.jsx)("div",{style:{marginRight:"1rem"}}),!0===c?Object(T.jsx)(y.a,(e={trigger:Object(T.jsx)(w.a,{src:O}),on:"hover",position:"bottom center",closeOnDocumentClick:!0,mouseEnterDelay:300},Object(u.a)(e,"mouseEnterDelay",0),Object(u.a)(e,"arrow",!1),Object(u.a)(e,"children",Object(T.jsxs)("div",{className:"user-popup-menu",children:[Object(T.jsx)("div",{className:"user-popup-menu-item",children:Object(T.jsx)("button",{className:"btn",onClick:function(){n.push("/post/user")},children:"My posts"})}),Object(T.jsx)("div",{className:"user-popup-menu-item",children:Object(T.jsx)("button",{className:"btn",onClick:function(){n.push("/profile")},children:"Profile"})}),Object(T.jsx)("div",{className:"user-popup-menu-item",children:"Statistics"}),Object(T.jsx)("div",{className:"user-popup-menu-item",style:{borderBottom:"none"},children:Object(T.jsx)("button",{className:"btn",onClick:function(){g(),n.push("/")},children:"Logout"})})]})),e)):Object(T.jsx)("div",{onClick:function(){t.showAuth(!0)},style:{cursor:"pointer"},children:Object(T.jsx)(S.a,{fontSize:"large"})})]})]})},N=n(89),A=n(129),R=n.n(A),P=n(130),D=n.n(P),L=n(220),I=n.n(L),U=n(221),B=n.n(U);var J=function(e){var t=e.post;return Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",margin:"0.5rem",justifyContent:"space-around"},children:[Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(R.a,{})}),Object(T.jsx)("div",{children:t.postStatistics.likeCount})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(D.a,{})}),Object(T.jsx)("div",{children:t.postStatistics.dislikeCount})]}),Object(T.jsx)("div",{children:function(e){var t=new Date(e+"Z").toLocaleDateString("en-US").split("/"),n=Object(o.a)(t,3),r=n[0],i=n[1],c=n[2];return"".concat(i,".").concat(r,".").concat(c)}(t.publicationTime)}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(I.a,{})}),Object(T.jsx)("div",{children:t.postStatistics.viewCount})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(B.a,{})}),Object(T.jsx)("div",{children:t.postStatistics.commentCount})]})]})};var F=function(e){var t=e.post,n=Object(l.g)();return Object(T.jsxs)("div",{style:{width:375,border:"solid",borderWidth:1,borderRadius:15,borderColor:"rgb(228, 228, 228)",margin:"0.5rem"},children:[Object(T.jsx)("div",{children:Object(T.jsx)("button",{className:"btn",onClick:function(){n.push("/post/view/"+t.id)},children:Object(T.jsx)("div",{children:Object(T.jsx)("img",{src:t.postCardImageUrl,style:{borderRadius:10,width:"100%"}})})})}),Object(T.jsx)("div",{style:{marginLeft:"0.5rem",marginRight:"0.5rem"},children:Object(T.jsx)("span",{style:{fontWeight:600},children:t.title})}),Object(T.jsx)("div",{children:Object(T.jsx)(J,{post:t})})]})},V=n(222),_=n(351),z=n(352),M=function(){var e=function(){try{return JSON.parse(localStorage.getItem("REACT_TOKEN_AUTH")||"null")}catch(e){return null}}(),t=function(){if(null===e)return null;var t=e.accessToken.split(".");if(t.length<2)return null;try{return JSON.parse(atob(t[1])).sub}catch(n){return null}},n=t(),r=function(){return n},i=function(){return!!e},c=function(e){if("string"!==typeof e)return null;var t=e.split(".");if(t.length<2)return null;try{var n=JSON.parse(atob(t[1]));return n&&n.exp&&Number.isFinite(n.exp)?1e3*n.exp:null}catch(r){return null}},s=[],o=function(c){var o=null;c?(localStorage.setItem("REACT_TOKEN_AUTH",JSON.stringify(c)),o=t()):localStorage.removeItem("REACT_TOKEN_AUTH"),e=c,n=o,function(){var e=i(),t=r();s.forEach((function(n){return n({isLogged:e,userId:t})}))}()};return{getToken:function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","");case 2:if(!((r=c(e.accessToken))&&Date.now()>r)){t.next=8;break}return t.next=5,fetch("/update-token",{method:"POST",body:e.refreshToken}).then((function(e){return e.json()})).catch((function(){return null}));case 5:typeof(n=t.sent)!==typeof e&&o(null),o(n);case 8:return t.abrupt("return",e.accessToken);case 9:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}(),isLoggedIn:i,setToken:o,subscribe:function(e){s.push(e)},unsubscribe:function(e){s=s.filter((function(t){return t!==e}))},getUserId:r}},H=function(){var e=M();return{useAuth:function(){var t=Object(r.useState)({isLogged:e.isLoggedIn(),userId:e.getUserId()}),n=Object(o.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var t=function(e){c(e)};return e.subscribe(t),function(){e.unsubscribe(t)}}),[]),[i]},authFetch:function(){var t=Object(h.a)(b.a.mark((function t(n,r){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken();case 2:if(i=t.sent,r=r||{},""!==i){t.next=6;break}return t.abrupt("return",fetch(n,r));case 6:return r.headers=Object(j.a)(Object(j.a)({},r.headers),{},{Authorization:"".concat(i)}),t.abrupt("return",fetch(n,r));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),login:function(t){e.setToken(t)},logout:function(){e.setToken(null)},getUserId:function(){return e.getUserId()}}}(),K=(H.useAuth,H.authFetch,H.login,H.logout);H.getUserId;var W=function(){var e=Object(l.g)(),t=Object(r.useContext)(lt),n=Object(r.useState)({postList:[],pageNumber:-1,totalPages:2,hasNext:!0}),i=Object(o.a)(n,2),c=i[0],s=i[1],a=Object(r.useState)({field:"id",direction:"asc"}),u=Object(o.a)(a,2),j=u[0],d=u[1],b=function(){console.log(j);var n=c.pageNumber+1,r=!(n===c.totalPages),i=new URL(window.location.origin+"/posts"),o={pageNumber:n,pageSize:12,sort:j.field,direction:j.direction};Object.keys(o).forEach((function(e){return i.searchParams.append(e,o[e])})),x(i).then((function(n){if(n.ok)return n.json();if(403!==n.status)throw new Error("Error code: "+n.status);K(),t.showAuth(!0),e.push("/")})).then((function(e){s({postList:[].concat(Object(N.a)(c.postList),Object(N.a)(e.postCartDataList)),pageNumber:n,hasNext:r,totalPages:e.totalPages})})).catch((function(t){console.log(t),e.push("/error")}))},h=function(n,r){s({postList:[],pageNumber:-1,hasNext:!0,totalPages:0}),d({field:n,direction:r});var i=new URL(window.location.origin+"/posts"),c={pageNumber:0,pageSize:12,sort:n,direction:r};Object.keys(c).forEach((function(e){return i.searchParams.append(e,c[e])})),x(i).then((function(n){if(n.ok)return n.json();if(403!==n.status)throw new Error("Error code: "+n.status);K(),t.showAuth(!0),e.push("/")})).then((function(e){s({postList:Object(N.a)(e.postCartDataList),pageNumber:1,hasNext:!0,totalPages:e.totalPages})})).catch((function(t){console.log(t),e.push("/error")}))};return Object(r.useEffect)((function(){return b()}),[]),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{style:{display:"flex"},children:[Object(T.jsx)("div",{children:Object(T.jsx)(_.a,{onClick:function(){h("postStatistics.likeCount","desc")},children:"Best"})}),Object(T.jsx)("div",{style:{marginRight:"2rem"},children:Object(T.jsx)(_.a,{onClick:function(){h("postStatistics.commentCount","desc")},children:"Popular"})})]}),Object(T.jsx)("div",{id:"scrollableDiv",style:{height:"100vh",overflowY:"auto"},children:Object(T.jsx)(V.a,{dataLength:c.postList.length,next:b,hasMore:c.hasNext,loader:Object(T.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(T.jsx)(z.a,{})}),endMessage:Object(T.jsx)("div",{style:{width:"100%"},children:Object(T.jsx)("span",{children:"No moaaar!!"})}),scrollableTarget:"scrollableDiv",style:{display:"flex",flexWrap:"wrap",marginLeft:"auto",marginRight:"auto"},children:c.postList.map((function(e){return Object(T.jsx)(F,{post:e},e.id)}))})})]})};var Y=n(278),G=n(353);var Q=function(e){var t=e.comment,n=e.isAuth,i=Object(r.useContext)(lt),c=n?{}:{cursor:"not-allowed",pointerEvents:"none"},s=v(),a=Object(l.g)(),u=Object(r.useState)(t.text),j=Object(o.a)(u,2),d=j[0],b=j[1],h=Object(r.useState)({isShow:!1,text:"",error:!1}),O=Object(o.a)(h,2),f=O[0],p=O[1];return Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"0.5rem"},children:[Object(T.jsx)(w.a,{src:t.user.avatarUrl}),Object(T.jsxs)("div",{style:{width:"100%"},children:[Object(T.jsx)("div",{style:{marginLeft:"0.25rem"},children:Object(T.jsx)("span",{style:{fontWeight:600},children:"".concat(t.user.firstName," ").concat(t.user.lastName)})}),!0===t.isEnabled?Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{marginLeft:"0.5rem"},children:d}),Object(T.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(Y.a,{color:"primary",onClick:function(){},style:c,children:Object(T.jsx)(R.a,{})})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:t.likes})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem",alignItems:"center"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(Y.a,{color:"primary",onClick:function(){},style:c,children:Object(T.jsx)(D.a,{})})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:t.dislikes})]}),n&&t.user.id===s?Object(T.jsxs)("div",{style:{alignSelf:"center"},children:[Object(T.jsx)(_.a,{variant:"outlined",onClick:function(){p({isShow:!f.isShow,text:d,error:!1})},style:{marginRight:"1rem"},children:"Edit"}),f.isShow?Object(T.jsx)(_.a,{variant:"outlined",color:"primary",onClick:function(){""===f.text&&p({isShow:f.isShow,text:f.text,error:!0}),x("".concat(window.location.origin,"/comments/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({postId:t.postId,text:f.text})}).then((function(e){if(e.ok)return e.json();if(403===e.status)return g(),i.showAuth(!0),a.push("/"),{result:!1};throw new Error("Error code: "+e.status)})).then((function(e){!0===e.result&&(b(f.text),p({isShow:!1,text:"",error:!1}))})).catch((function(e){console.log(e),a.push("/error")}))},children:"Submit"}):Object(T.jsx)("div",{})]}):Object(T.jsx)("div",{})]})}),f.isShow?Object(T.jsx)("div",{children:Object(T.jsx)(G.a,{onChange:function(e){p({isShow:f.isShow,text:e.target.value,error:!1})},helperText:f.error?"Comment must not be empty":"",error:f.error,value:f.text,multiline:!0,rowsMax:5,variant:"outlined",style:{width:"100%"}})}):Object(T.jsx)("div",{})]}):Object(T.jsx)("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:Object(T.jsx)("span",{style:{color:"rgb(150,0,0)"},children:"The comment was blocked"})})]})]})},Z=function(e){var t=new Date(e+"Z").toLocaleDateString("en-US").split("/"),n=Object(o.a)(t,3),r=n[0],i=n[1],c=n[2];return"".concat(i,".").concat(r,".").concat(c)};var q=function(e){var t=e.postId,n=e.comments,i=e.setComments,c=e.postData,s=e.setPostData,a=Object(r.useContext)(lt),u=Object(l.g)(),d=Object(r.useState)(""),b=Object(o.a)(d,2),h=b[0],O=b[1],f=Object(r.useState)(!1),p=Object(o.a)(f,2),m=p[0],g=p[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:Object(T.jsx)(G.a,{helperText:m?"Comment can't be empty":"",error:m,onChange:function(e){g(!1),O(e.target.value)},multiline:!0,rowsMax:5,variant:"outlined",style:{width:"100%"}})}),Object(T.jsx)("div",{style:{marginTop:"1rem",marginBottom:"1rem",textAlign:"center"},children:Object(T.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){""!==h?x("".concat(window.location.origin,"/comments"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({postId:t,text:h})}).then((function(e){if(e.ok)return e.json();if(403!==e.status)throw new Error("Error code: "+e.status);K(),a.showAuth(!0),u.push("/"),i({commentList:[],pageNumber:0,totalPages:0,hasNext:!1})})).then((function(e){if(!1!==e.result){i({commentList:[e].concat(Object(N.a)(n.commentList)),pageNumber:n.nextPage,totalPages:n.totalPages,hasNext:n.hasNext});var t=Object(j.a)({},c.post);t.postStatistics.commentCount=t.postStatistics.commentCount+1,s({post:t,isVote:c.isVote,voteValue:c.voteValue})}})).catch((function(e){console.log(typeof e),console.log(e),u.push("/error")})):g(!0)},children:"Submit"})})]})};var X=function(){var e=Object(r.useContext)(lt),t=Object(l.h)().id,n=p(),i=Object(o.a)(n,1)[0],c=Object(l.g)(),s=Object(r.useState)({post:{postStatistics:{},user:{firstName:"",lastName:""}}}),a=Object(o.a)(s,2),u=a[0],d=a[1],b=Object(r.useState)({commentList:[],pageNumber:-1,totalPages:2,hasNext:!0}),h=Object(o.a)(b,2),O=h[0],f=h[1],m=function(e){return i?!0===u.isVote?e?u.voteValue?{cursor:"not-allowed",pointerEvents:"none",color:"rgb(15,148,15)"}:{}:u.voteValue?{}:{cursor:"not-allowed",pointerEvents:"none",color:"rgb(15,148,15)"}:{}:{cursor:"not-allowed",pointerEvents:"none"}},g=function(){var n=O.pageNumber+1,r=!(n===O.totalPages),i=new URL("".concat(window.location.origin,"/comments")),s={pageNumber:n,pageSize:12,sort:"id",postId:t};Object.keys(s).forEach((function(e){return i.searchParams.append(e,s[e])})),x(i).then((function(t){if(t.ok)return t.json();if(403===t.status)return K(),e.showAuth(!0),c.push("/"),{commentList:[],pageNumber:0,totalPages:0,hasNext:!1};throw new Error("Error code: "+t.status)})).then((function(e){f({commentList:[].concat(Object(N.a)(O.commentList),Object(N.a)(e.commentList)),pageNumber:n,totalPages:e.totalPages,hasNext:r})})).catch((function(e){console.log(e),c.push("/error")}))};return Object(r.useEffect)((function(){return function(){var n=new URL("".concat(window.location.origin,"/posts/").concat(t));x(n).then((function(t){if(t.ok)return t.json();if(403!==t.status)throw new Error("Error code: "+t.status);K(),e.showAuth(!0),c.push("/"),d({})})).then((function(e){return d(e)})).catch((function(e){console.log(e),c.push("/error")}))}()}),[]),Object(r.useEffect)((function(){return g()}),[]),Object(T.jsx)("div",{children:Object(T.jsx)("div",{id:"comment-c",style:{height:"100vh",overflowY:"auto"},children:Object(T.jsxs)(V.a,{dataLength:O.commentList.length,next:g,hasMore:O.hasNext,loader:Object(T.jsx)(z.a,{}),endMessage:Object(T.jsx)("div",{style:{width:"100%"},children:Object(T.jsx)("span",{children:"No moaaar!!"})}),scrollableTarget:"comment-c",style:{margin:"1rem"},children:[Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(w.a,{src:u.post.avatarUrl})}),Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:"".concat(u.post.user.firstName," ").concat(u.post.user.lastName)}),Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)("div",{children:Z(u.post.publicationTime)})})]}),Object(T.jsx)("div",{children:Object(T.jsx)("h1",{children:u.post.title})}),Object(T.jsx)("div",{style:{marginBottom:"1rem"},dangerouslySetInnerHTML:{__html:u.post.text}}),Object(T.jsx)("div",{children:Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",margin:"1rem"},children:[Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(Y.a,{color:"primary",onClick:function(){x("".concat(window.location.origin,"/votes"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({postId:u.post.id,value:!0})}).then((function(t){if(t.ok)return t.json();if(403===t.status)return K(),e.showAuth(!0),c.push("/"),{result:!1};throw new Error("Error code: "+t.status)})).then((function(e){if(!0===e.result){var t=Object(j.a)({},u.post);t.postStatistics.likeCount=t.postStatistics.likeCount+1,t.postStatistics.dislikeCount=t.postStatistics.dislikeCount-1,d({post:t,isVote:!0,voteValue:!0})}})).catch((function(e){console.log(e),c.push("/error")}))},style:m(!0),children:Object(T.jsx)(R.a,{})})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:u.post.postStatistics.likeCount})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem"},children:Object(T.jsx)(Y.a,{color:"primary",onClick:function(){x("".concat(window.location.origin,"/votes"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({postId:u.post.id,value:!1})}).then((function(t){if(t.ok)return t.json();if(403===t.status)return K(),e.showAuth(!0),c.push("/"),{result:!1};throw new Error("Error code: "+t.status)})).then((function(e){if(!0===e.result){var t=Object(j.a)({},u.post);t.postStatistics.likeCount=t.postStatistics.likeCount-1,t.postStatistics.dislikeCount=t.postStatistics.dislikeCount+1,d({post:t,isVote:!0,voteValue:!1})}})).catch((function(e){console.log(e),c.push("/error")}))},style:m(!1),children:Object(T.jsx)(D.a,{})})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:u.post.postStatistics.dislikeCount})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem",paddingBottom:12,paddingTop:12},children:Object(T.jsx)(I.a,{})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:u.post.postStatistics.viewCount})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginRight:"0.5rem"},children:[Object(T.jsx)("div",{style:{marginRight:"0.25rem",paddingBottom:12,paddingTop:12},children:Object(T.jsx)(B.a,{})}),Object(T.jsx)("div",{style:{paddingBottom:12,paddingTop:12},children:u.post.postStatistics.commentCount})]})]})}),Object(T.jsx)("hr",{}),Object(T.jsx)("div",{children:Object(T.jsx)("h2",{children:"Comments"})}),i?Object(T.jsx)("div",{children:Object(T.jsx)(q,{postId:u.post.id,comments:O,setComments:f,postData:u,setPostData:d})}):Object(T.jsx)("div",{children:Object(T.jsx)("h4",{children:"Comments allowed only for registered users"})}),O.commentList.length>0?O.commentList.map((function(e){return Object(T.jsx)(Q,{comment:e,isAuth:i},e.id)})):Object(T.jsx)("div",{children:"There is no comments"})]})})})},$=n(228),ee=n.n($),te=n(414),ne=n.n(te),re=n(423),ie=n.n(re),ce=n(415),se=n.n(ce),oe=n(421),ae=n.n(oe),le=n(289),ue=n.n(le),je=n(287),de=n.n(je),be=n(288),he=n.n(be),Oe=n(416),fe=n.n(Oe),pe=n(418),xe=n.n(pe),me=n(419),ge=n.n(me),ve=n(420),ye=n.n(ve),we=n(424),Ce=n.n(we),Se=n(417),ke=n.n(Se),Te=n(422),Ee=n.n(Te),Ne=n(425),Ae=n.n(Ne),Re=n(110),Pe=n.n(Re),De=n(426),Le=n.n(De),Ie=n(406),Ue=n(376),Be=n(368),Je=n(679),Fe={Add:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ne.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(se.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(de.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(he.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ue.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(fe.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ke.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(xe.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ge.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ye.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ue.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ae.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(de.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(Ee.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(ie.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(Ce.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(T.jsx)(Ae.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))}))};var Ve,_e=function(){var e=Object(l.g)(),t=Object(r.useRef)(),n=Object(r.useContext)(lt),i="MODERATED",c="PUBLISHED",s="DECLINED",a="INACTIVE",u="FUTURE",d="ALL",b=Object(r.useState)(c),h=Object(o.a)(b,2),O=h[0],f=h[1],p=Object(r.useState)({isOpen:!1,id:null}),m=Object(o.a)(p,2),g=m[0],v=m[1],w=function(e){f(e.target.value),t.current.onQueryChange()},C=function(){e.push("/post/new")};return Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{open:g.isOpen,onClose:function(){v(!1)},children:Object(T.jsx)("div",{className:"modal",children:Object(T.jsx)("div",{className:"modal-main",style:{width:300},children:Object(T.jsxs)("div",{style:{margin:"2rem"},children:[Object(T.jsx)("div",{style:{marginBottom:"2rem"},children:Object(T.jsx)("h2",{style:{textAlign:"center"},children:"The post will be permanently deleted!"})}),Object(T.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(T.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return function(){var r=g.id;v({isOpen:!1,id:null}),x("".concat(window.location.origin,"/posts/").concat(r),{method:"DELETE"}).then((function(t){if(t.ok)return t.json();if(403===t.status)return K(),n.showAuth(!0),e.push("/"),{result:!1};throw new Error("Error code: "+t.status)})).then((function(e){!0===e.result&&t.current.onQueryChange()})).catch((function(t){console.log(t),e.push("/error")}))}()},children:"Confirm"}),Object(T.jsx)(_.a,{variant:"contained",color:"default",onClick:function(){return v({isOpen:!1,id:null})},children:"Cancel"})]})]})})})}),Object(T.jsx)(ee.a,{tableRef:t,style:{boxShadow:"none"},columns:[{title:"Header",field:"postCardImageUrl",render:function(e){return Object(T.jsx)("img",{style:{width:"100%",borderRadius:15},src:e.postCardImageUrl})},width:null,cellStyle:{width:"10%"},editable:"never"},{title:"Active",field:"isActive",render:function(e){return Object(T.jsx)(Ie.a,{color:"primary",checked:e.isActive})},width:null,cellStyle:{width:"5%"},editComponent:function(e){return Object(T.jsx)("div",{children:Object(T.jsx)(Ie.a,{color:"primary",checked:e.rowData.isActive,onChange:function(t){return e.onChange(t.target.checked)}})})}},{title:"Publication time",field:"publicationTime",width:null,cellStyle:{width:"25%"},render:function(e){return Z(e.publicationTime)},editComponent:function(e){return Object(T.jsx)("div",{children:Object(T.jsx)(G.a,{type:"datetime-local",value:e.rowData.publicationTime,onChange:function(t){return e.onChange(t.target.value)}})})}},{title:"Title",field:"title",width:null,cellStyle:{width:"60%"},editable:"never"}],components:{Toolbar:function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)($.MTableToolbar,Object(j.a)({},e)),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Object(T.jsxs)(Ue.a,{style:{flexDirection:"row"},"aria-label":"Post status",value:O,onChange:w,children:[Object(T.jsx)(Be.a,{labelPlacement:"top",value:c,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"Published"}),Object(T.jsx)(Be.a,{labelPlacement:"top",value:i,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"Moderated"}),Object(T.jsx)(Be.a,{labelPlacement:"top",value:s,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"Declined"}),Object(T.jsx)(Be.a,{labelPlacement:"top",value:a,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"Inactive"}),Object(T.jsx)(Be.a,{labelPlacement:"top",value:u,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"Future"}),Object(T.jsx)(Be.a,{labelPlacement:"top",value:d,control:Object(T.jsx)(Je.a,{color:"primary"}),label:"All"})]}),Object(T.jsx)("div",{children:Object(T.jsx)(_.a,{color:"primary",variant:"contained",onClick:C,children:"New post"})})]})]})}},data:function(t){return new Promise((function(r,i){var c=new URL(window.location.origin+"/posts/user"),s={pageNumber:t.page,pageSize:t.pageSize,status:O,sort:"id"};Object.keys(s).forEach((function(e){return c.searchParams.append(e,s[e])})),x(c).then((function(t){if(t.ok)return t.json();if(403===t.status)return K(),n.showAuth(!0),e.push("/"),{postByUserList:[],page:0,totalElements:0};throw new Error("Error code: "+t.status)})).then((function(e){r({data:e.postByUserList,page:e.page,totalCount:e.totalElements})})).catch((function(t){console.log(t),e.push("/error")}))}))},editable:{onRowUpdate:function(t,r){return new Promise((function(r,i){var c="".concat(window.location.origin,"/posts/").concat(t.id);x(c,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:null,text:null,publicationTime:t.publicationTime,isActive:t.isActive,postCardImageUrl:null})}).then((function(t){if(t.ok)r();else{if(403!==t.status)throw new Error("Error code: "+t.status);K(),n.showAuth(),e.push("/")}}))})).catch((function(t){console.log(t),e.push("/error")}))}},actions:[{icon:function(){return Object(T.jsx)(he.a,{color:"primary"})},tooltip:"Delete post",onClick:function(e,t){return v({isOpen:!0,id:t.id})}},{icon:function(){return Object(T.jsx)(Pe.a,{})},tooltip:"Edit page",onClick:function(t,n){return r=n.id,void e.push("/post/edit/"+r);var r}},{icon:function(){return Object(T.jsx)(Le.a,{})},tooltip:"View",onClick:function(t,n){return r=n.id,void e.push("/post/view/"+r);var r}}],icons:Fe,title:"All posts list",options:{actionsColumnIndex:5}})]})},ze=n(427),Me=n.n(ze),He=(n(620),n(428)),Ke=n.n(He),We=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new URL(window.location.origin+"/images/upload"),x(n,{method:"POST",body:t}).then((function(e){e.ok?e.json().then((function(e){var t=e.url,n=Ve.getEditorSelection();Ve.getEditor().insertEmbed(n.index,"image",t)})):console.log("!!!")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye={toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]],handlers:{image:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=Object(h.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.files[0],(r=new FormData).append("image",n),t.next=5,We(r);case 5:t.sent;case 6:case"end":return t.stop()}}),t)})))}}},clipboard:{matchVisual:!1}};var Ge=function(e){var t=e.postId,n=e.isEdit,i=e.isNew,c=Object(r.useContext)(lt),s=Object(l.h)().pathId,a=void 0===t?s:t,u={title:"",isActive:!1,publicationTime:new Date,postCardImageUrl:"",text:""},d=Object(l.g)(),b=Object(r.useState)(u.text),h=Object(o.a)(b,2),O=h[0],f=h[1],p=Object(r.useState)({title:u.title,isActive:u.isActive}),m=Object(o.a)(p,2),g=m[0],v=m[1],y=Object(r.useState)(u.publicationTime),w=Object(o.a)(y,2),C=w[0],S=w[1],k=Object(r.useState)(u.postCardImageUrl),E=Object(o.a)(k,2),N=E[0],A=E[1];return Object(r.useEffect)((function(){return n&&x("".concat(window.location.origin,"/posts/user/").concat(a)).then((function(e){if(e.ok)return e.json();if(403!==e.status)throw new Error("Error code: "+e.status);K(),c.showAuth(!0),d.push("/")})).then((function(e){f(e.text),A(e.postCardImageUrl),v({title:e.title,isActive:e.isActive}),S(e.publicationTime)})).catch((function(e){console.log(e),d.push("/error")})),void(i&&(f(u.text),A(u.postCardImageUrl),v({title:u.title,isActive:u.isActive}),S(u.publicationTime)))}),[a]),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{textAlign:"center"},children:n?Object(T.jsx)("h3",{children:"Update post"}):Object(T.jsx)("h3",{children:"Create new post"})}),Object(T.jsx)("hr",{})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(T.jsxs)("div",{style:{width:"50%",margin:"0.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(T.jsxs)("div",{style:{margin:"0.5rem"},children:[Object(T.jsx)("div",{children:"Title"}),Object(T.jsx)("textarea",{name:"title",style:{width:"100%",resize:"none"},rows:"5",value:g.title,onChange:function(e){v(Object(j.a)(Object(j.a)({},g),{},{title:e.target.value}))}})]}),Object(T.jsxs)("div",{style:{margin:"0.5rem"},children:[Object(T.jsx)("div",{children:"Publication time"}),Object(T.jsx)(Ke.a,{onChange:S,value:new Date(C)})]}),Object(T.jsxs)("div",{style:{margin:"0.5rem"},children:[Object(T.jsx)("input",{type:"checkbox",name:"isActive",checked:g.isActive,onChange:function(e){v(Object(j.a)(Object(j.a)({},g),{},{isActive:e.target.checked}))}}),Object(T.jsx)("span",{children:"Is this post will be active?"})]})]}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"50%",margin:"0.5rem"},children:[Object(T.jsxs)("div",{style:{margin:"0.5rem"},children:["Header image",Object(T.jsx)("span",{children:"(will be centered and clipped to 5x3)"})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("img",{src:N,style:{width:"100%",borderRadius:15}}),Object(T.jsx)("div",{style:{margin:"0.5rem"},children:Object(T.jsx)("input",{type:"file",accept:"/image*",onChange:function(e){var t=new FormData;t.append("xScale",5),t.append("yScale",3),t.append("image",e.target.files[0]);var n=new URL(window.location.origin+"/images/header/upload");x(n,{method:"POST",body:t}).then((function(e){if(e.ok)return e.json();if(403===e.status)return K(),c.showAuth(!0),d.push("/"),{url:""};throw new Error("Error code: "+e.status)})).then((function(e){var t=e.url;A(t)})).catch((function(e){console.log(e),d.push("/error")}))}})})]})]})]}),Object(T.jsx)(Me.a,{ref:function(e){return Ve=e},value:O,modules:Ye,onChange:function(e){f(e)}})]}),Object(T.jsx)("div",{style:{margin:"1rem",display:"flex",justifyContent:"center"},children:Object(T.jsx)("div",{children:Object(T.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){var e=n?"".concat(window.location.origin,"/posts/").concat(a):"".concat(window.location.origin,"/posts");x(e,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({title:g.title,text:O,publicationTime:C,isActive:g.isActive,postCardImageUrl:N})}).then((function(e){if(e.ok)return e.json();if(403===e.status)return K(),c.showAuth(!0),d.push("/"),{result:!1};throw new Error("Error code: "+e.status)})).then((function(e){!0===e.result&&d.push("/post/user")})).catch((function(e){console.log(e),d.push("/error")}))},children:"Save"})})})]})};var Qe=function(){return Object(T.jsx)("h1",{children:"Page not found"})},Ze=n(233),qe=n.n(Ze);n(642);var Xe=function(e){var t=e.show,n=e.handleClose,i=Object(r.useContext)(lt),c=Object(l.g)(),s=!0===t?"modal display-block":"modal display-none",a=Object(r.useState)({username:"",password:""}),d=Object(o.a)(a,2),b=d[0],h=d[1],O=Object(r.useState)(!1),f=Object(o.a)(O,2),p=f[0],x=f[1],g=function(e){var t=e.target,n=t.name,r=t.value;h(Object(j.a)(Object(j.a)({},b),{},Object(u.a)({},n,r))),x(!1)};return Object(T.jsx)("div",{className:s,children:Object(T.jsxs)("div",{className:"modal-main",children:[Object(T.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",position:"absolute",right:0,top:0},children:Object(T.jsx)(Y.a,{onClick:n,children:Object(T.jsx)(qe.a,{})})}),Object(T.jsx)("form",{onSubmit:function(e){e&&e.preventDefault(),fetch("/login",{method:"POST",body:JSON.stringify(b)}).then((function(e){if(e.ok){var t=e.headers.get("Authorization"),n=e.headers.get("Refresh");if(null===t||null===n)throw new Error;return{accessToken:t,refreshToken:n}}throw new Error})).then((function(e){m(e),h({username:"",password:""}),i.showAuth(!1),i.avatar.fetch(!i.avatar.trigger)})).catch((function(e){return x(!0)}))},children:Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"1rem"},children:[Object(T.jsx)("h2",{style:{textAlign:"center"},children:"Please sign in"}),Object(T.jsx)("div",{style:{marginBottom:"0.5rem"},children:Object(T.jsx)(G.a,{error:p,variant:"outlined",name:"username",value:b.username,label:"Email",onChange:g})}),Object(T.jsx)("div",{style:{marginBottom:"0.5rem"},children:Object(T.jsx)(G.a,{error:p,helperText:p?"incorrect email or password":"",variant:"outlined",type:"password",name:"password",label:"Password",value:b.password,onChange:g})}),Object(T.jsx)("div",{style:{marginBottom:"0.5rem"},children:Object(T.jsx)(_.a,{type:"submit",variant:"contained",children:"Sign in"})}),Object(T.jsx)("div",{children:Object(T.jsx)(_.a,{color:"primary",onClick:function(){c.push("/registration"),i.showAuth(!1)},children:"registration"})})]})})]})})},$e=n(432),et=n(430),tt=n.n(et);var nt=function(){var e=Object(r.useContext)(lt),t=Object(l.g)(),n=p(),i=Object(o.a)(n,1)[0],c=v(),s=Object(r.useState)(),a=Object(o.a)(s,2),d=a[0],b=a[1],h=Object(r.useState)({firstName:"",lastName:"",email:"",registrationDate:"",role:{name:""}}),O=Object(o.a)(h,2),f=O[0],m=O[1],y=Object(r.useState)(""),w=Object(o.a)(y,2),C=w[0],S=w[1],k=Object(r.useState)({error:!1,text:"Email"}),E=Object(o.a)(k,2),N=E[0],A=E[1],R=Object(r.useState)({readOnly:!0}),P=Object(o.a)(R,2),D=P[0],L=P[1],I=Object(r.useState)(!1),U=Object(o.a)(I,2),B=U[0],J=U[1],F=function(e){var t=e.target,n=t.name,r=t.value;m(Object(j.a)(Object(j.a)({},f),{},Object(u.a)({},n,r))),A({error:!1,text:"Email"})},V=Object(r.useCallback)((function(e){var t=URL.createObjectURL(e[0]);S(t),b(e[0])}),[]),_=function(n){x("".concat(window.location.origin,"/users/").concat(c),{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({firstName:f.firstName,lastName:f.lastName,email:f.email,avatarUrl:void 0===n?f.avatarUrl:n})}).then((function(n){if(n.ok)return n.json();if(403===n.status)return g(),e.showAuth(!0),t.push("/"),{result:!1};throw new Error("Error code: "+n.status)})).then((function(t){!0===t.result?(S(void 0===n?f.avatarUrl:n),void 0!==n&&e.avatar.fetch(!e.avatar.trigger)):A({error:!0,text:"This email address is already taken"})})).catch((function(e){console.log(e),t.push("/error")}))},z=Object($e.a)({onDrop:V,accept:["image/jpeg","image/png"],minSize:0,multiple:!1}),M=z.getRootProps,H=z.getInputProps,K=z.isDragActive,W=z.isDragReject;return Object(r.useEffect)((function(){i&&x("".concat(window.location.origin,"/users/").concat(c)).then((function(n){if(n.ok)return n.json();if(403===n.status)return g(),e.showAuth(),t.push("/"),{result:{}};throw new Error("Error code: "+n.status)})).then((function(e){m(e),S(e.avatarUrl)})).catch((function(e){console.log(e),t.push("/error")}))}),[]),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(T.jsx)("h3",{style:{textAlign:"center"},children:"User profile"}),Object(T.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(T.jsx)("div",{style:{alignSelf:"center"},children:Object(T.jsx)(Y.a,{onClick:function(){J(!B),L({readOnly:!D.readOnly})},children:B?Object(T.jsx)(qe.a,{color:"primary"}):Object(T.jsx)(Pe.a,{color:"primary"})})}),B?Object(T.jsx)("div",{style:{alignSelf:"center"},children:Object(T.jsx)(Y.a,{onClick:function(){if(void 0!==d){var n=new FormData;n.append("image",d),n.append("xScale",1),n.append("yScale",1);var r=new URL(window.location.origin+"/images/header/upload");x(r,{method:"POST",body:n}).then((function(n){if(n.ok)return n.json();if(403===n.status)return g(),e.showAuth(!0),t.push("/"),{url:""};throw new Error("Error code: "+n.status)})).then((function(e){var t=e.url;b(void 0),_(t),J(!1),L({readOnly:!0})})).catch((function(e){console.log(e),t.push("/error")}))}void 0===d&&(_(),J(!1),L({readOnly:!0}))},children:Object(T.jsx)(tt.a,{color:"primary"})})}):Object(T.jsx)("div",{})]})]}),Object(T.jsx)("hr",{}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(T.jsx)("div",{style:{display:"flex",flexDirection:"column",width:200,justifyContent:"center",marginRight:"2rem"},children:Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:Object(T.jsx)("img",{style:{width:"100%",border:"solid",borderWidth:1,borderRadius:15,color:"rgb(200,200,200)"},src:C})}),B?Object(T.jsxs)("div",Object(j.a)(Object(j.a)({},M()),{},{style:{background:"rgb(230,230,230)",border:"dotted",color:"rgb(170,170,170)"},children:[Object(T.jsx)("input",Object(j.a)({},H())),Object(T.jsx)("div",{style:{height:60,display:"flex",alignItems:"center",justifyContent:"center"},children:W?Object(T.jsx)("div",{style:{color:"red",margin:"0.5rem"},children:"Files not supported"}):K?Object(T.jsx)("div",{style:{color:"black",margin:"0.5rem"},children:"Drop the files here ..."}):Object(T.jsx)("div",{style:{color:"black",margin:"0.5rem"},children:"Drag 'n' drop image here, or click to select"})})]})):Object(T.jsx)("div",{})]})}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{style:{margin:"1rem",display:"flex"},children:[Object(T.jsx)(G.a,{name:"firstName",value:f.firstName,inputProps:D,style:{width:"100%"},helperText:"First name",onChange:F}),B?Object(T.jsx)(Pe.a,{color:"primary",style:{marginTop:10,marginLeft:10}}):Object(T.jsx)("div",{})]}),Object(T.jsxs)("div",{style:{margin:"1rem",display:"flex"},children:[Object(T.jsx)(G.a,{name:"lastName",value:f.lastName,inputProps:D,style:{width:"100%"},helperText:"Last name",onChange:F}),B?Object(T.jsx)(Pe.a,{color:"primary",style:{marginTop:10,marginLeft:10}}):Object(T.jsx)("div",{})]}),Object(T.jsxs)("div",{style:{margin:"1rem",display:"flex"},children:[Object(T.jsx)(G.a,{name:"email",value:f.email,error:N.error,helperText:N.text,inputProps:D,style:{width:"100%"},onChange:F}),B?Object(T.jsx)(Pe.a,{color:"primary",style:{marginTop:10,marginLeft:10}}):Object(T.jsx)("div",{})]}),Object(T.jsx)("div",{style:{margin:"1rem"},children:Object(T.jsx)(G.a,{name:"registrationDate",value:f.registrationDate,type:"datetime-local",helperText:"Registration date",onChange:F})})]})]})]})};var rt=function(){var e,t=Object(l.g)(),n=Object(r.useState)({firstName:"",lastName:"",email:"",password:""}),i=Object(o.a)(n,2),c=i[0],s=i[1],a="form",d="progress",b="success",h=Object(r.useState)({error:!1,text:"Email"}),O=Object(o.a)(h,2),f=O[0],p=O[1],x=Object(r.useState)({error:!1,text:"Password"}),m=Object(o.a)(x,2),g=m[0],v=m[1],y=Object(r.useState)(a),w=Object(o.a)(y,2),C=w[0],S=w[1],k=function(e){var t=e.target,n=t.name,r=t.value;s(Object(j.a)(Object(j.a)({},c),{},Object(u.a)({},n,r))),p({error:!1,text:"Email"}),v({error:!1,text:"Password"})},E=function(){S(d),fetch("".concat(window.location.origin,"/users"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(c)}).then((function(e){if(e.ok)return e.json();throw new Error("Error code: "+e.status)})).then((function(e){e.result?S(b):e.isEmailError?p({error:!0,text:"This email address is already taken"}):e.isPasswordError&&v({error:!0,text:"Password must be 8 characters long"})})).catch((function(e){console.log(e),t.push("/error")}))};return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(T.jsx)("h3",{style:{textAlign:"center"},children:"Registration"})}),Object(T.jsx)("hr",{}),Object(T.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(e=C,e===a?Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{margin:"1rem",display:"flex"},children:Object(T.jsx)(G.a,{name:"firstName",value:c.firstName,style:{width:"100%"},helperText:"First name",onChange:k})}),Object(T.jsx)("div",{style:{margin:"1rem",display:"flex"},children:Object(T.jsx)(G.a,{name:"lastName",value:c.lastName,style:{width:"100%"},helperText:"Last name",onChange:k})}),Object(T.jsx)("div",{style:{margin:"1rem",display:"flex"},children:Object(T.jsx)(G.a,{name:"email",value:c.email,error:f.error,helperText:f.text,style:{width:"100%"},onChange:k})}),Object(T.jsx)("div",{style:{margin:"1rem",display:"flex"},children:Object(T.jsx)(G.a,{name:"password",value:c.password,error:g.error,helperText:g.text,style:{width:"100%"},type:"password",onChange:k})}),Object(T.jsx)("div",{style:{textAlign:"center"},children:Object(T.jsx)(_.a,{color:"primary",onClick:E,children:"register"})})]}):e===d?Object(T.jsx)("div",{style:{marginTop:"3rem"},children:Object(T.jsx)(z.a,{})}):Object(T.jsx)("div",{children:Object(T.jsx)("h3",{children:"Please check your email for further instructions"})}))})]})};var it=function(){var e,t=Object(l.h)().id,n=Object(l.g)(),i="activating",c="complete",s="rejected",a=Object(r.useState)(s),u=Object(o.a)(a,2),j=u[0],d=u[1];return Object(r.useEffect)((function(){fetch("".concat(window.location.origin,"/users/activate/").concat(t),{method:"PUT"}).then((function(e){if(e.ok)return e.json();throw new Error("Error code: "+e.status)})).then((function(e){e.result?d(c):d(s)})).catch((function(e){console.log(e),n.push("/error")}))}),[]),Object(T.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(e=j,e===i?Object(T.jsx)("div",{children:Object(T.jsx)(z.a,{})}):e===c?Object(T.jsx)("h3",{children:"Account succsecifuly activated! You can now log in!"}):Object(T.jsx)("h3",{children:"Account has already been activated or the activation link is out of date"}))})},ct=n(227),st=n(653),ot=n(356);var at=function(){return Object(T.jsx)(ct.a,{children:Object(T.jsx)(st.a,{children:Object(T.jsx)(ot.a,{children:"Posts"})})})},lt=i.a.createContext();var ut=function(){var e=p(),t=Object(o.a)(e,1)[0],n=Object(r.useState)(!1),i=Object(o.a)(n,2),c=i[0],s=i[1];return Object(T.jsx)(lt.Provider,{value:{showAuth:s,avatar:{trigger:!1,fetch:null}},children:Object(T.jsxs)(a.a,{children:[Object(T.jsx)(Xe,{show:c,handleClose:s}),Object(T.jsx)(E,{}),Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,flexShrink:1,flexBasis:"auto"},children:[Object(T.jsx)("div",{style:{width:"25%"},children:Object(T.jsx)("div",{style:{marginRight:"5rem"},children:Object(T.jsx)(at,{})})}),Object(T.jsx)("div",{style:{width:"50%"},children:Object(T.jsxs)(l.d,{children:[Object(T.jsx)(l.b,{exact:!0,path:"/",children:Object(T.jsx)(W,{})}),Object(T.jsx)(l.b,{path:"/post/view/:id",children:Object(T.jsx)(X,{})}),Object(T.jsx)(l.b,{path:"/post/edit/:pathId",children:function(){return t?Object(T.jsx)(Ge,{isEdit:!0}):(s(!0),Object(T.jsx)(l.a,{to:"/"}))}}),Object(T.jsx)(l.b,{path:"/post/new",children:function(){return t?Object(T.jsx)(Ge,{isNew:!0}):(s(!0),Object(T.jsx)(l.a,{to:"/"}))}}),Object(T.jsx)(l.b,{path:"/post/user",children:function(){return t?Object(T.jsx)(_e,{}):(s(!0),Object(T.jsx)(l.a,{to:"/"}))}}),Object(T.jsx)(l.b,{path:"/profile",children:function(){return t?Object(T.jsx)(nt,{}):(s(!0),Object(T.jsx)(l.a,{to:"/"}))}}),Object(T.jsx)(l.b,{path:"/registration",children:Object(T.jsx)(rt,{})}),Object(T.jsx)(l.b,{path:"/user/activate/:id",children:Object(T.jsx)(it,{})}),Object(T.jsx)(l.b,{path:"/error",children:Object(T.jsx)("h1",{children:"Error"})}),Object(T.jsx)(Qe,{})]})}),Object(T.jsx)("div",{})]})]})})};s.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(ut,{})}),document.getElementById("root"))}},[[644,1,2]]]);
//# sourceMappingURL=main.9138ccb1.chunk.js.map