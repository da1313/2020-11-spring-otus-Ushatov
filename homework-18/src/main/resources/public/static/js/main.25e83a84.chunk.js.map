{"version":3,"sources":["service/BookService.js","components/BookComponent.jsx","components/PagingComponent.jsx","service/GenreService.js","components/BookListSortComponent.jsx","components/BookListSearchComponent.jsx","components/BookListComponent.jsx","service/CommentService.js","components/CreateCommentComponent.jsx","components/CommentComponent.jsx","components/ScoreComponent.jsx","components/BookViewComponent.jsx","service/AuthorService.js","components/CreateBookComponent.jsx","components/ErrorComponent.jsx","components/HeaderComponent.jsx","App.js","index.js"],"names":["id","axios","get","params","book","post","put","title","authorId","genresId","delete","BookComponent","onDelete","history","useHistory","className","onClick","push","src","author","name","genres","map","g","i","commentsCount","avgScore","Number","parseFloat","toFixed","BookService","deleteBook","then","res","data","result","PagingComponent","pageParams","onPageChange","currentPage","maxPages","nextPage","previousPage","items","addToRight","Math","abs","addToLeft","actulaRightOffset","getPageNumbers","BookListSortComponent","onGenreChange","onSortChange","useState","setState","useEffect","genreService","getGenres","onChange","e","target","value","BookListSearchComponent","onSearch","onSubmit","type","placeholder","BookListComponent","books","genreId","sort","qyery","state","pageNumber","query","setBooksBySearch","setBooksByGenre","setBooks","req","pageSize","bookService","getBooksBySearch","newState","bookList","totalPages","getBookByGenre","getBooks","bookId","filter","b","preventDefault","CreateCommentComponent","onCreateComment","text","setText","changeTextHandler","CommentComponent","count","page","total","comments","setComments","getComments","CommentService","r","updatedComments","commentList","forEach","c","loadMorePages","username","readOnly","length","createComment","ScoreComponent","scoreCounts","max","reduce","a","BookViewComponent","useParams","getBookById","r1","undefined","CreateBookComponent","stateDifinition","authors","onGenreChangeHandler","checked","console","log","AuthorService","getAuthors","GenreService","r2","r3","includes","updateBook","createBook","saveBook","moveToBookList","ErrorComponent","HeaderComponent","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.25e83a84.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nclass BookService{\r\n\r\n    getBookById(id){\r\n        return axios.get(\"/books/\" + id);\r\n    }\r\n\r\n    getBooks(params){\r\n        return axios.get(\"/books\", {params: params});\r\n    }\r\n\r\n    getBooksBySearch(params){\r\n        return axios.get(\"/books\", {params: params});\r\n    }\r\n\r\n    getBookByGenre(params){\r\n        return axios.get(\"/books\", {params: params});\r\n    }\r\n\r\n    createBook(book){\r\n        return axios.post(\"/books\", book);\r\n    }\r\n\r\n    updateBook(book){\r\n        return axios.put(\"/books/\" + book.id, {title: book.title, authorId: book.authorId, genresId: book.genresId});\r\n    }\r\n\r\n    deleteBook(id){\r\n        return axios.delete(\"/books/\" + id);\r\n    }\r\n\r\n}\r\n\r\nexport default new BookService();","import '../css/BookComponent.css'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport BookService from '../service/BookService';\r\n\r\nfunction BookComponent({ book , onDelete }) {\r\n\r\n  let history = useHistory();\r\n\r\n  const moveToEditPage = () =>{\r\n    history.push(`/new/${book.id}`);\r\n  }\r\n\r\n  const deleteBook = () =>{\r\n    BookService.deleteBook(book.id).then(res =>{\r\n      if (res.data.result !== null && res.data.result === \"false\"){\r\n        history.push(\"/error\");\r\n        return;\r\n      }\r\n      onDelete(book.id);\r\n    })\r\n  }\r\n\r\n  const moveToBookView = () =>{\r\n    history.push(`/book-view/${book.id}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"bookCont\">\r\n      <button className=\"buttonLink\" onClick={moveToBookView}><img src=\"/image\"/></button>\r\n      <div className=\"title\">{book.title}</div>\r\n      <ul>\r\n        <li>Author: {book.author.name}</li>\r\n        <li>\r\n          Genres:{\" \"}\r\n          {book.genres.map((g, i) => (\r\n            <span key={i}>{g.name} </span>\r\n          ))}\r\n        </li>\r\n        <li>Comments: {book.commentsCount === 0? \"-\" : book.commentsCount}</li>\r\n        <li>Avg.Score: {book.avgScore === 0 ? \"-\" : Number.parseFloat(book.avgScore).toFixed(1)}</li>\r\n      </ul>\r\n      <div className=\"edit\">\r\n        <button onClick={moveToEditPage}>Edit</button>\r\n        <button onClick={deleteBook}>Delete</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookComponent;\r\n","import '../css/PagingComponent.css';\r\n\r\nfunction PagingComponent({ pageParams, onPageChange }) {\r\n\r\n  const currentPage = pageParams.currentPage + 1;\r\n  const maxPages = pageParams.maxPages;\r\n\r\n  const nextPage = currentPage + 1 > maxPages ? currentPage : currentPage + 1;\r\n  const previousPage = currentPage - 1 < 1 ? currentPage : currentPage - 1;\r\n\r\n  const leftOffset = 2;\r\n  const rightOffset = 2;\r\n\r\n  const getPageNumbers = () =>{\r\n    let items = [];\r\n    \r\n    let addToRight = (currentPage - leftOffset) < 1 ? Math.abs(currentPage - leftOffset) + 1 : 0;\r\n    let addToLeft = (currentPage + rightOffset) > maxPages ? (currentPage + rightOffset - maxPages) : 0;\r\n    let actulaRightOffset = (currentPage + rightOffset + addToRight) > maxPages ? maxPages : currentPage + rightOffset + addToRight;\r\n    let actualLeftOffset = (currentPage - leftOffset - addToLeft) < 1 ? 1 : currentPage - leftOffset - addToLeft;\r\n\r\n    for (let i = actualLeftOffset; i < currentPage; i++) {\r\n      items.push(\r\n        <li key={i}>\r\n          <button  onClick={() => onPageChange(i - 1)}>{i}</button>\r\n        </li>\r\n      );\r\n    }\r\n    items.push(\r\n      <li key={currentPage} >\r\n        <button className=\"active\" onClick={() => onPageChange(currentPage - 1)}>{currentPage}</button>\r\n      </li>\r\n    );\r\n    for (let i = currentPage + 1; i < actulaRightOffset + 1; i++) {\r\n      items.push(\r\n        <li key={i} >\r\n          <button  onClick={() => onPageChange(i - 1)}>{i}</button>\r\n        </li>\r\n      );\r\n    }\r\n    return items;\r\n  }\r\n  \r\n  return (\r\n    <div className=\"pagingCont\">\r\n      <ul>\r\n        <li >\r\n            <button  onClick={() => onPageChange(0)}>First</button>\r\n          </li>\r\n          <li >\r\n            <button  onClick={() => onPageChange(previousPage - 1)}>Previous</button>\r\n          </li>\r\n          {getPageNumbers()}\r\n          <li >\r\n            <button  onClick={() => onPageChange(nextPage - 1)}>Next</button>\r\n          </li>\r\n          <li >\r\n            <button  onClick={() => onPageChange(maxPages - 1)}>Last</button>\r\n          </li>\r\n        </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PagingComponent;\r\n","import axios from 'axios';\r\n\r\nclass GenreService{\r\n\r\n    getGenres(){\r\n        return axios.get(\"/genres\");\r\n    }\r\n\r\n}\r\n\r\nexport default new GenreService();","import React, { useState, useEffect } from 'react'; \r\nimport { useHistory } from 'react-router';\r\nimport genreService from '../service/GenreService';\r\n\r\nfunction BookListSortComponent({onGenreChange, onSortChange}){\r\n\r\n  let history = useHistory();\r\n\r\n  const [genres, setState] = useState([]);\r\n\r\n  const fetchGenres = () =>{\r\n    genreService.getGenres().then(res => {\r\n      if (res.data.result !== null && res.data.result === \"false\"){\r\n        history.push(\"/error\");\r\n        return;\r\n      }\r\n      setState(res.data);\r\n    })\r\n  }\r\n\r\n  \r\n  useEffect(() => fetchGenres(), []);\r\n\r\n  return(\r\n    <div className=\"bookListNavSort\">\r\n      <ul>\r\n        <li>\r\n          <select onChange={(e) => {\r\n              onGenreChange(e.target.value)\r\n            }}>\r\n            <option value=\"null\">All</option>\r\n            {genres.map(g =>{\r\n              return <option value={g.id} key={g.id}>{g.name}</option>\r\n            })}\r\n          </select>\r\n        </li>\r\n        <li><button onClick={()=>onSortChange(\"NEW\")}>New</button></li>\r\n        <li><button onClick={()=>onSortChange(\"BEST\")}>Best</button></li>\r\n        <li><button onClick={()=>onSortChange(\"POPULAR\")}>Popular</button></li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookListSortComponent;","import '../css/BookListSearchComponent.css'\r\n\r\nfunction BookListSearchComponent({onSearch}){\r\n    return (\r\n      <div className=\"searchFormCont\">\r\n        <form onSubmit={(e)=>onSearch(e)}>\r\n          <input type=\"search\" placeholder=\"Search\"/>\r\n          <button type=\"submit\">Search</button>\r\n        </form>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default BookListSearchComponent;","import React, { useState, useEffect } from 'react'; \r\nimport bookService from '../service/BookService';\r\nimport Book from './BookComponent';\r\nimport PagingComponent from './PagingComponent';\r\nimport '../css/BookListComponent.css'\r\nimport BookListSortComponent from './BookListSortComponent';\r\nimport BookListSearchComponent from './BookListSearchComponent';\r\nimport { useHistory } from 'react-router';\r\n\r\nfunction BookListComponent(){\r\n\r\n  let history = useHistory();\r\n\r\n  const pageSize = 8;\r\n\r\n  let stateDifinition = {\r\n    books: [],\r\n    currentPage: 0,\r\n    maxPages: 0,\r\n    genreId: null,\r\n    sort: \"NEW\",\r\n    qyery: null\r\n  }\r\n\r\n  const [state, setState] = useState(stateDifinition);\r\n\r\n  const onPageChange = (pageNumber) =>{\r\n    if(state.query != null){\r\n      setBooksBySearch(state.query, pageNumber, state.sort);\r\n    } else if(state.genreId != null){\r\n      setBooksByGenre(state.genreId, pageNumber, state.sort);\r\n    } else{\r\n      setBooks(pageNumber, state.sort);\r\n    }\r\n  }\r\n\r\n  const onGenreChange = (genreId) =>{\r\n    if(genreId == \"null\"){\r\n      setBooks(0, \"NEW\");\r\n    } else{\r\n      setBooksByGenre(genreId, 0, \"NEW\");\r\n    }\r\n  }\r\n\r\n  const onSortChange = (sort) =>{\r\n    if(state.query != null){\r\n      setBooksBySearch(state.query, state.currentPage, sort);\r\n    } else if(state.genreId != null){\r\n      setBooksByGenre(state.genreId, state.currentPage, sort);\r\n    } else{\r\n      setBooks(state.currentPage, sort);\r\n    }\r\n  }\r\n\r\n  const onSearch = (e) =>{\r\n    if(e) e.preventDefault();\r\n    const query = e.target[0].value;\r\n    if(query){\r\n      setBooksBySearch(query, state.currentPage, state.sort);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    onPageChange(0);\r\n  }, []);\r\n\r\n  const setBooksBySearch = (query, pageNumber, sort) =>{\r\n    let req = {\r\n      pageNumber: pageNumber,\r\n      pageSize: pageSize,\r\n      sort: sort,\r\n      query: query\r\n    }\r\n    bookService.getBooksBySearch(req).then(res=>{\r\n      if (res.data.result !== null && res.data.result === \"false\"){\r\n        history.push(\"/error\");\r\n        return;\r\n      }\r\n      let newState = {\r\n        books: res.data.bookList,\r\n        currentPage: pageNumber,\r\n        maxPages: res.data.totalPages,\r\n        genreId: null,\r\n        sort: sort,\r\n        query: query\r\n      }\r\n      setState(newState);\r\n    })\r\n  }\r\n\r\n  const setBooksByGenre = (genreId, pageNumber, sort) =>{\r\n    let req = {\r\n      pageNumber: pageNumber,\r\n      pageSize: pageSize,\r\n      sort: sort,\r\n      genreId: genreId\r\n    }\r\n    bookService.getBookByGenre(req).then(res=>{\r\n      if (res.data.result !== null && res.data.result === \"false\"){\r\n        history.push(\"/error\");\r\n        return;\r\n      }\r\n      let newState = {\r\n        books: res.data.bookList,\r\n        currentPage: pageNumber,\r\n        maxPages: res.data.totalPages,\r\n        genreId: genreId,\r\n        sort: sort,\r\n        query: null\r\n      }\r\n      setState(newState);\r\n    })\r\n  }\r\n\r\n  const setBooks = (pageNumber, sort) =>{\r\n    let req = {\r\n      pageNumber: pageNumber,\r\n      pageSize: pageSize,\r\n      sort: sort\r\n    }\r\n    bookService.getBooks(req).then(res=>{\r\n      if (res.data.result !== null && res.data.result === \"false\"){\r\n        history.push(\"/error\");\r\n        return;\r\n      }\r\n      let newState = {\r\n        books: res.data.bookList,\r\n        currentPage: pageNumber,\r\n        maxPages: res.data.totalPages,\r\n        genreId: null,\r\n        sort: sort,\r\n        query: null\r\n      }\r\n      setState(newState);\r\n    })\r\n  }\r\n\r\n  const onDelete = (bookId) =>{\r\n    let newState = {\r\n      books: state.books.filter((b) => b.id != bookId),\r\n      currentPage: state.currentPage,\r\n      maxPages: state.maxPages,\r\n      genreId: state.genreId,\r\n      sort: state.sort,\r\n      qyery: state.qyery\r\n    }\r\n    setState(newState);\r\n  }\r\n\r\n  return (\r\n    <div className=\"bookListMainCont\">\r\n      <nav className=\"bookListNav\">\r\n        <BookListSortComponent onGenreChange={onGenreChange} onSortChange={onSortChange}/>\r\n        <BookListSearchComponent onSearch={onSearch}/>\r\n      </nav>\r\n      <div className=\"bookListCont\">\r\n        {state.books.map(book => <Book key={book.id} book={book} onDelete={onDelete}/>)}\r\n      </div>\r\n      <PagingComponent onPageChange={onPageChange} pageParams={{currentPage: state.currentPage, maxPages: state.maxPages}}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookListComponent;","import axios from 'axios';\r\n\r\nclass CommentService{\r\n\r\n    getComments(req){\r\n        return axios.get(\"/comments\", {params: req});\r\n    }\r\n\r\n    createComment(req){\r\n        return axios.post(\"/comments\", req);\r\n    }\r\n\r\n}\r\n\r\nexport default new CommentService();","import React, { useState } from 'react';\r\n\r\nfunction CreateCommentComponent( { onCreateComment } ){\r\n\r\n    const[text, setText] = useState(\"\");\r\n\r\n    const changeTextHandler = (e) =>{\r\n        let text = e.target.value;\r\n        setText(text);\r\n    }\r\n\r\n    return(\r\n        <div className=\"add-comment\">\r\n            <div>Add new...</div>\r\n            <div>\r\n                <textarea onChange={(e) =>changeTextHandler(e)}></textarea>\r\n            </div>\r\n            <div><button onClick={() => onCreateComment(text)}>Add</button></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateCommentComponent;","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport CommentService from '../service/CommentService';\r\nimport CreateCommentComponent from './CreateCommentComponent';\r\n\r\nfunction CommentComponent( {id} ){\r\n\r\n    let history = useHistory();\r\n\r\n    const pageSize = 3;\r\n\r\n    const initComments = {\r\n        comments: [],\r\n        totalPages: 0,\r\n        currentPage: 0\r\n    }\r\n\r\n    const[comments, setComments] = useState(initComments);\r\n\r\n    const getComments = (page) =>{\r\n        if(!id){\r\n            return;\r\n        }\r\n        let req = {\r\n            id: id,\r\n            pageSize: pageSize,\r\n            pageNumber: page\r\n        }\r\n        CommentService.getComments(req).then(r => {\r\n            if (r.data.result !== null && r.data.result === \"false\"){\r\n                history.push(\"/error\");\r\n                return;\r\n            }\r\n            let updatedComments;\r\n            if(page <= comments.currentPage){\r\n                updatedComments = r.data.commentList;\r\n            } else{\r\n                updatedComments = comments.comments;\r\n                r.data.commentList.forEach(c => updatedComments.push(c));\r\n            }\r\n            setComments({\r\n                comments: updatedComments,\r\n                totalPages: r.data.totalPages,\r\n                currentPage: page}\r\n            )\r\n        });\r\n    }\r\n\r\n    const loadMorePages = () =>{\r\n        if(comments.currentPage < comments.totalPages - 1){\r\n            getComments(comments.currentPage + 1);\r\n        }\r\n    }\r\n\r\n    const renderMoreButton = (count, page, total) =>{\r\n        if(count === 0){\r\n            return <div>There are no comments</div>;\r\n        } else if(page === total - 1){\r\n            return <div></div>\r\n        } else{\r\n            return <div><button onClick={loadMorePages}>more</button></div>;\r\n        }\r\n    }\r\n\r\n    const onCreateComment = (text) =>{\r\n        CommentService.createComment({ id: id, text: text}).then(r =>getComments(0));\r\n    }\r\n\r\n    useEffect(() => getComments(0), []);\r\n\r\n    return(\r\n        <div className=\"comment-cont\">\r\n            {comments.comments.map(c =>(\r\n                <div className=\"comment\" key={c.id}>\r\n                    <div className=\"author-cont\">\r\n                        <div className=\"ava-cont\">\r\n                            <img src=\"/image\"/>\r\n                        </div>\r\n                        <div>{c.username}</div>\r\n                    </div>\r\n                    <div>\r\n                        <textarea value={c.text} readOnly={true}></textarea>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n            {renderMoreButton(comments.comments.length, comments.currentPage, comments.totalPages)}\r\n            <CreateCommentComponent onCreateComment={onCreateComment} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CommentComponent;","function ScoreComponent({ scoreCounts, avgScore }){\r\n\r\n    let max = scoreCounts.reduce((a,b) => a + b, 0);\r\n\r\n    return(\r\n        <div>\r\n            <div>Scores</div>\r\n            <div className=\"score-cont\">5&nbsp;<progress max={max} value={scoreCounts[4]}></progress>&nbsp;{scoreCounts[4]}</div>\r\n            <div className=\"score-cont\">4&nbsp;<progress max={max} value={scoreCounts[3]}></progress>&nbsp;{scoreCounts[3]}</div>\r\n            <div className=\"score-cont\">3&nbsp;<progress max={max} value={scoreCounts[2]}></progress>&nbsp;{scoreCounts[2]}</div>\r\n            <div className=\"score-cont\">2&nbsp;<progress max={max} value={scoreCounts[1]}></progress>&nbsp;{scoreCounts[1]}</div>\r\n            <div className=\"score-cont\">1&nbsp;<progress max={max} value={scoreCounts[0]}></progress>&nbsp;{scoreCounts[0]}</div>\r\n            <div>Average: {avgScore}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ScoreComponent;","import React, { useState, useEffect } from 'react';\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport '../css/BookViewComponent.css'\r\nimport BookService from '../service/BookService';\r\nimport CommentComponent from './CommentComponent';\r\nimport CreateCommentComponent from './CreateCommentComponent';\r\nimport ScoreComponent from './ScoreComponent';\r\n\r\nfunction BookViewComponent(){\r\n\r\n    let history = useHistory();\r\n\r\n    let {id} = useParams();\r\n\r\n    const [state, setState] = useState({});\r\n\r\n    const getBook = () =>{\r\n        BookService.getBookById(id).then(r1 => {\r\n            if (r1.data.result !== null && r1.data.result === \"false\"){\r\n                history.push(\"/error\");\r\n                return;\r\n            }\r\n            setState(r1.data);\r\n        });\r\n    }\r\n\r\n    useEffect(() => getBook(),[]);\r\n\r\n    return(\r\n        <div>\r\n            <div className=\"book-view-cont\">\r\n                <div className=\"book-image-cont\">\r\n                    <img src=\"/image\"/>\r\n                </div>\r\n                <div className=\"book-view-details-cont\">\r\n                    <div>Title: {state.title && state.title}</div>\r\n                    <div>Author: {state.author && state.author.name}</div>\r\n                    <div>Genres: {state.genres && state.genres.map(g => <span key={g.id}>{g.name}&nbsp;</span>)}</div>\r\n                    <ScoreComponent scoreCounts={state.scoreCounts === undefined ? [0,0,0,0,0] : state.scoreCounts}\r\n                     avgScore={state.avgScore && state.avgScore}/>\r\n                </div>\r\n            </div>\r\n            <CommentComponent id={id}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BookViewComponent;","import axios from 'axios';\r\n\r\nclass AuthorService{\r\n\r\n    getAuthors(){\r\n        return axios.get(\"/authors\");\r\n    }\r\n\r\n}\r\n\r\nexport default new AuthorService();","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useParams } from 'react-router-dom';\r\nimport '../css/CreateBookComponent.css'\r\nimport AuthorService from '../service/AuthorService';\r\nimport BookService from '../service/BookService';\r\nimport GenreService from '../service/GenreService';\r\n\r\nfunction CreateBookComponent(){\r\n\r\n    let history = useHistory();\r\n\r\n    let { id } = useParams();\r\n\r\n    const stateDifinition = {\r\n        authors: [],\r\n        genres:[],\r\n        book:{\r\n            id: id,\r\n            title: \"\",\r\n            authorId: \"\",\r\n            genresId: []\r\n        }\r\n    }\r\n\r\n    const [state, setState] = useState(stateDifinition);\r\n\r\n    const fetchData = () =>{\r\n        console.log(state);\r\n        AuthorService.getAuthors().then(r1 =>{\r\n            if (r1.data.result !== null && r1.data.result === \"false\"){\r\n                history.push(\"/error\");\r\n                return;\r\n            }\r\n            GenreService.getGenres().then(r2 =>{\r\n                if (r2.data.result !== null && r2.data.result === \"false\"){\r\n                    history.push(\"/error\");\r\n                    return;\r\n                }\r\n                if(id){\r\n                    BookService.getBookById(id).then(r3 =>{\r\n                        if (r3.data.result !== null && r3.data.result === \"false\"){\r\n                            history.push(\"/error\");\r\n                            return;\r\n                        }\r\n                        let book = {\r\n                            id: r3.data.id,\r\n                            title: r3.data.title,\r\n                            authorId: r3.data.author.id,\r\n                            genresId: r3.data.genres.map(g => g.id)\r\n                        }\r\n                        setState({authors: r1.data, genres: r2.data, book: book});\r\n                    });\r\n                }\r\n                let book = {\r\n                    id: state.book.id,\r\n                    title: state.book.title,\r\n                    authorId: r1.data[0].id,\r\n                    genresId: state.book.genresId\r\n                }\r\n                setState({authors: r1.data, genres: r2.data, book: book});\r\n            })\r\n        })\r\n    }\r\n\r\n    const onTitleChangeHandler = (e) =>{\r\n        let book = state.book;\r\n        book.title = e.target.value;\r\n        setState({authors: state.authors, genres: state.genres, book: book});\r\n    }\r\n\r\n    const onAuthorChangeHandler = (e) =>{\r\n        let book = state.book;\r\n        book.authorId = e.target.value;\r\n        console.log(book.authorId);\r\n        setState({authors: state.authors, genres: state.genres, book: book});\r\n    }\r\n\r\n    const onGenreChangeHandler = (e) =>{\r\n        let book = state.book;\r\n        let genreId = e.target.value;\r\n        let isChecked = e.target.checked;\r\n        if (isChecked === true){\r\n            book.genresId.push(e.target.value);\r\n        } else{\r\n            book.genresId = book.genres.filter(i => i !== genreId);\r\n        }\r\n        setState({authors: state.authors, genres: state.genres, book: book});\r\n    }\r\n\r\n    const saveBook = (e) =>{\r\n        e.preventDefault();\r\n        if(state.book.id){\r\n            BookService.updateBook(state.book).then(() => history.push(\"/\"));\r\n        } else{\r\n            BookService.createBook(state.book).then(() => history.push(\"/\"));\r\n        }\r\n    }\r\n\r\n    const moveToBookList = (e) =>{\r\n        e.preventDefault();\r\n        history.push(\"/\");\r\n    }\r\n\r\n    useEffect(()=>fetchData(), []);\r\n\r\n    return(\r\n        <div className=\"formCont\">\r\n            <h3>Create book</h3>\r\n            <form>\r\n                <div className=\"formGroup\">\r\n                    <label>Title</label>\r\n                    <input placeholder=\"Title\" type=\"text\" onChange={onTitleChangeHandler} value={state.book.title}/>\r\n                </div>\r\n                <div className=\"formGroup\">\r\n                    <label>Author</label>\r\n                    <select onChange={onAuthorChangeHandler} value={state.book.authorId}>\r\n                        {state.authors.map(a =><option key={a.id} value={a.id}>{a.name}</option>)}\r\n                    </select>\r\n                </div>\r\n                <div className=\"formCheckbox\">\r\n                    <label>Genre</label>\r\n                    {state.genres.map(g =>{\r\n                        return(\r\n                            <div key={g.id}>\r\n                                <input type=\"checkbox\" value={g.id} checked={state.book.genresId.includes(g.id)} onChange={onGenreChangeHandler} />\r\n                                <span>{g.name}</span>\r\n                            </div>)\r\n                })}\r\n                </div>\r\n                <div className=\"formGroupAccept\">\r\n                    <button onClick={e => saveBook(e)}>Save</button>\r\n                    <button onClick={e => moveToBookList(e)}>Cancel</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CreateBookComponent;","function ErrorComponent() {\r\n  return (\r\n    <div>\r\n      <h1>We deeply sorry. It wont happen again! Probably...</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorComponent;\r\n","import '../css/HeaderComponent.css'\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction HeaderComponent() {\r\n\r\n  let history = useHistory();\r\n\r\n  const moveToBookList = () =>{\r\n    history.push(\"/\");\r\n  }\r\n\r\n  const moveToCreateBook = () =>{\r\n    history.push(\"/new\");\r\n  }\r\n\r\n  return (\r\n    <header>\r\n      <div className=\"headerTitle\"><h3>Book CRUD UI</h3></div>\r\n      <div className=\"headerNav\">\r\n        <button onClick={moveToBookList}>View books</button>\r\n        <button onClick={moveToCreateBook}>Create new</button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default HeaderComponent;\r\n","import React from \"react\";\r\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\r\nimport BookListComponent from \"./components/BookListComponent\";\r\nimport BookViewComponent from \"./components/BookViewComponent\";\r\nimport CreateBookComponent from \"./components/CreateBookComponent\";\r\nimport ErrorComponent from \"./components/ErrorComponent\";\r\nimport HeaderComponent from \"./components/HeaderComponent\";\r\nimport \"./css/App.css\"\r\n\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <HeaderComponent/>\r\n        <div className=\"mainCont\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={BookListComponent}></Route>\r\n            <Route path=\"/new/:id\" component={CreateBookComponent}></Route>\r\n            <Route path=\"/new/\" component={CreateBookComponent}></Route>\r\n            <Route path=\"/book-view/:id\" component={BookViewComponent}></Route>\r\n            <Route path=\"/error\" component={ErrorComponent}></Route>\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}